---
title: "Accepting cryptocurrency using Crypto Wallet"
---

I added URL support for invoice generation, as well as a little invoice generator tool directly in the [crypto wallet](https://warashibetrader.github.io/crypto/wallet). Here are five degrees of usage, in order of sophistication.

### 1. URL: Single or static product

The in-wallet tool should suffice to produce the URL you need. For instance, I used the tool to make [this](https://warashibetrader.github.io/crypto/wallet?preferred=XNO&addresses=%257B%2522XNO%2522%253A%2522nano_1gpquwssoy8491ajmxp9cxjb3o38imcxidissob7cxc38o6h6r4d8gg639b7%2522%257D&items=%255B%257B%2522item%2522%253A%2522Donation%2520to%2520the%2520developer%2522%252C%2522XNO%2522%253A%25221%2522%257D%252C%257B%2522item%2522%253A%2522A%2520memo%2522%252C%2522XNO%2522%253A%2522%2522%257D%255D) donation link.




### 2. HTML: Button opening a new tab

It's not very professional to ask for payment from an in-line link, and possibly disruptive for the link to leave the current website. A little HTML creates a button which opens in a new tab:

<button id="myInvoiceElement" style="display:block; margin:auto;"><a style="color:#333" target="_blank" href="https://warashibetrader.github.io/crypto/wallet?preferred=XNO&addresses=%257B%2522XNO%2522%253A%2522nano_1gpquwssoy8491ajmxp9cxjb3o38imcxidissob7cxc38o6h6r4d8gg639b7%2522%257D&items=%255B%257B%2522item%2522%253A%2522Donation%2520to%2520the%2520developer%2522%252C%2522XNO%2522%253A%25221%2522%257D%252C%257B%2522item%2522%253A%2522A%2520memo%2522%252C%2522XNO%2522%253A%2522%2522%257D%255D">Donate!</a></button>

Here is the HTML code in plaintext:

    <button style="display:block; margin:auto;">
        <a id="myInvoiceElement" style="color:#333" target="_blank" href="[insert myPaymentURL]">Donate!</a>
    </button>


### 3. Javascript: Dynamically populated shopping cart

If you want to dynamically construct an invoice based on say, a customer's shopping cart, then you will need to generate payment URLs on the fly. This will need a tiny bit of javascript. Include the following function in the global scope of your javascript:

    function makePaymentURL(preferred, addresses, items) {
        const url = new URL('https://warashibetrader.github.io/crypto/wallet');
        url.search = new URLSearchParams({preferred:preferred, 
                                          addresses:encodeURIComponent(JSON.stringify(addresses)), 
                                          items:encodeURIComponent(JSON.stringify(items))});
        return url;
    }

The makePaymentURL function returns the URL based on the input parameters. Use this to populate the URL for your payment link or button. An example, using the same HTML button from Step 2:

	let preferred = "XNO";
	let addresses = {XNO: "nano_1gpquwssoy8491ajmxp9cxjb3o38imcxidissob7cxc38o6h6r4d8gg639b7"};
	let items = [{item:"Donation to the developer", XNO:"1"}, {item:"A memo"}];  
	
	let myPaymentURL = makePaymentURL(preferred, addresses, items);
	let document.getElementById("myInvoiceElement").href = myPaymentURL;
    
    
### 4. More Javascript: Listening for confirmation


